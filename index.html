<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Thời khóa biểu</title>
<style>
body{font-family:Arial;margin:20px}
table{border-collapse:collapse;width:100%}
th,td{border:1px solid #ccc;padding:8px;vertical-align:top}
th{background:#f2f2f2}
.subject{color:red;font-weight:bold}
.gv{color:blue;font-style:italic}
.hidden{display:none}
.conflict{background:#ffd6d6}
</style>
</head>
<body>

<h1>Thời khóa biểu</h1>

<button onclick="toggleAdmin()">Chế độ giáo vụ</button>

<div id="admin" class="hidden">
<h3>Thêm môn học</h3>
<input id="room" placeholder="Phòng (VD: LVS, B.101)"><br>
<select id="day">
<option>Thứ 2</option><option>Thứ 3</option><option>Thứ 4</option>
<option>Thứ 5</option><option>Thứ 6</option><option>Thứ 7</option>
</select><br>
<input id="subject" placeholder="Tên môn"><br>
<input id="time" placeholder="06:30-09:00"><br>
<input id="gv" placeholder="Giảng viên"><br>
<button onclick="add()">Thêm</button>
</div>

<table>
<thead>
<tr>
<th>Phòng</th>
<th>Thứ 2</th><th>Thứ 3</th><th>Thứ 4</th>
<th>Thứ 5</th><th>Thứ 6</th><th>Thứ 7</th>
</tr>
</thead>
<tbody id="body"></tbody>
</table>

<script>
let data = JSON.parse(localStorage.getItem("tkb")||"{}");

function toggleAdmin(){
 document.getElementById("admin").classList.toggle("hidden");
}

function add(){
 let r=room.value.trim(),d=day.value;
 if(!data[r]) data[r]={};
 if(!data[r][d]) data[r][d]=[];
 data[r][d].push({s:subject.value,t:time.value,g:gv.value});
 localStorage.setItem("tkb",JSON.stringify(data));
 render();
}

function render(){
 body.innerHTML="";
 Object.keys(data).forEach(r=>{
  let row=`<tr><td><b>${r}</b></td>`;
  ["Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"].forEach(d=>{
   let cell="";
   (data[r][d]||[]).forEach(c=>{
    cell+=`<div class="subject">${c.s}</div>
    <div>${c.t}</div>
    <div class="gv">${c.g}</div><hr>`;
   });
   row+=`<td>${cell}</td>`;
  });
  row+="</tr>";
  body.innerHTML+=row;
 });
}
render();
</script>

</body>
</html>
